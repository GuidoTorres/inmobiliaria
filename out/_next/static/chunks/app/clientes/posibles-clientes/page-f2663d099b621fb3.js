(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{17448:function(e,l,r){Promise.resolve().then(r.bind(r,79928))},79928:function(e,l,r){"use strict";r.r(l),r.d(l,{default:function(){return P}});var s=r(9268),a=r(96230),t=r(90362),o=r(98945),n=r(92951),i=r(52641),d=r(4660),c=r(83206),u=r(70509),m=r(76234),x=r(53235),h=r(80970),g=r(50946),j=r(47434),f=r(86006),v=r(5710),Z=r(84153),b=r(68919);let p=e=>{let{handleCancel:l}=e,r=(0,d.I)(),a=(0,i.useSelector)(e=>e.auth.user),t=(0,i.useSelector)(e=>e.crud.data),[o,{isLoading:n,isError:p,error:C,isSuccess:N,data:y}]=(0,Z.NM)(),[w,{isLoading:E,isError:k,error:P,isSuccess:F,data:_}]=(0,Z.mC)(),[I]=c.Z.useForm(),[L,S]=(0,f.useState)(v.n8);(0,f.useEffect)(()=>{t&&(S(t),I.setFieldsValue(t))},[t]);let q=(e,l)=>{if(!l&&e.target){let{name:l,value:r}=e.target;I.setFieldsValue({[l]:r||""}),S(e=>({...e,[l]:r||""}))}else I.setFieldsValue({[l]:e||""}),S(r=>({...r,[l]:e||""}))},D=async e=>{try{if(t)await w({clientPossible:e,id:t.cod_cliente});else{var l;await o({...e,cod_rol:3,creado_por:null===(l=a.data)||void 0===l?void 0:l.cod_usuario})}}catch(e){b.toast.error(e)}};return(0,f.useEffect)(()=>{if(N&&(b.toast.success(null==y?void 0:y.msg),l()),p){var e;b.toast.error(null===(e=C.data)||void 0===e?void 0:e.msg)}},[N,p]),(0,f.useEffect)(()=>{if(F&&(b.toast.success(null==_?void 0:_.msg),l()),k){var e;b.toast.error(null===(e=P.data)||void 0===e?void 0:e.msg)}},[F,k]),(0,s.jsx)(c.Z,{form:I,layout:"vertical",requiredMark:!0,onFinish:D,autoComplete:"off",scrollToFirstError:!0,children:(0,s.jsxs)(u.Z,{gutter:[16,16],children:[(0,s.jsx)(m.Z,{xs:24,md:12,lg:16,children:(0,s.jsx)(c.Z.Item,{name:"nombre",label:(0,s.jsx)(j.L,{text:"Nombre"}),hasFeedback:!0,rules:[{required:!0,message:"Por favor ingrese el nombre"}],children:(0,s.jsx)(x.Z,{name:"nombre",placeholder:"Nombre",value:L.nombre,onChange:q,allowClear:!0})})}),(0,s.jsx)(m.Z,{xs:24,md:12,lg:8,children:(0,s.jsx)(c.Z.Item,{name:"dni",value:L.dni,label:(0,s.jsx)(j.L,{text:"N\xb0 de DNI"}),hasFeedback:!0,rules:[{required:!0,message:"Por favor ingrese el DNI"},{validator:(e,l)=>l&&8!==l.toString().length?Promise.reject(Error("El campo debe tener 8 d\xedgitos")):Promise.resolve()}],children:(0,s.jsx)(h.Z,{name:"dni",maxLength:8,minLength:8,placeholder:"N\xfamero de DNI",value:L.dni,onChange:e=>q(e,"dni"),className:"w-full"})})}),(0,s.jsx)(m.Z,{xs:24,md:12,lg:16,children:(0,s.jsx)(c.Z.Item,{name:"correo",label:(0,s.jsx)(j.L,{text:"Correo"}),hasFeedback:!0,rules:[{required:!0,message:"Por favor ingrese el correo"},{type:"email",message:"El correo no es v\xe1lido"}],children:(0,s.jsx)(x.Z,{type:"email",name:"correo",placeholder:"Correo",value:L.correo,onChange:q,allowClear:!0})})}),(0,s.jsx)(m.Z,{xs:24,md:12,lg:8,children:(0,s.jsx)(c.Z.Item,{name:"celular",label:(0,s.jsx)(j.L,{text:"Celular"}),hasFeedback:!0,rules:[{required:!0,message:"Por favor ingrese el tel\xe9fono"}],children:(0,s.jsx)(x.Z,{name:"celular",placeholder:"Celular",value:L.celular,onChange:q,allowClear:!0})})}),(0,s.jsx)(m.Z,{span:24,children:(0,s.jsx)(c.Z.Item,{children:(0,s.jsxs)(u.Z,{gutter:[16,16],justify:"end",children:[(0,s.jsx)(m.Z,{xs:24,md:12,lg:4,justify:"end",order:r?2:1,children:(0,s.jsx)(g.ZP,{onClick:l,className:"w-full",children:"Cancelar"},"back")}),(0,s.jsx)(m.Z,{xs:24,md:12,lg:6,order:r?1:2,children:(0,s.jsx)(g.ZP,{type:"primary",loading:t?E:n,htmlType:"submit",className:"w-full",children:"Guardar cliente"})})]})})})]})})},C=e=>{let{isModalOpen:l,handleCancel:r}=e,d=(0,i.useDispatch)(),c=(0,i.useSelector)(e=>e.crud.data),u=()=>{d((0,a.qD)()),r()};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(t.Z,{title:(0,s.jsx)(o.Z.Title,{level:3,className:"text-center text-text-title",children:c?"Editar Posible Cliente":"Nuevo Posible Cliente"}),style:{top:20},width:1e3,open:l,onCancel:u,footer:null,children:[(0,s.jsx)(n.Z,{className:"mt-0"}),(0,s.jsx)(p,{handleCancel:u})]})})};var N=r(91608);let y=e=>{let{loading:l,columns:r,data:a}=e;return(0,s.jsx)(N.Z,{columns:r,dataSource:a,rowKey:e=>e.cod_usuario,loading:l,scroll:{x:"max-content",y:"max-content"}})};var w=r(24294),E=r(88334),k=r(15834);function P(){let e=(0,i.useDispatch)(),{data:l,isLoading:r}=(0,Z.ZX)(null),[t,{isError:o,error:d,isSuccess:c,data:x}]=(0,Z.jg)(),h=l=>{e((0,a.qT)({data:l})),p()},j=async e=>{try{await t(e)}catch(e){b.toast.error(e)}};(0,f.useEffect)(()=>{if(o){var e;b.toast.error(null===(e=d.data)||void 0===e?void 0:e.msg)}c&&b.toast.success(null==x?void 0:x.msg)},[o,c]);let{isModalOpen:v,handleOpen:p,handleCancel:N}=(0,E.d)(),P=(0,w.kB)(h,j),F=(0,f.useMemo)(()=>null==l?void 0:l.data,[l]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(k.Z,{direction:"vertical",className:"w-full",size:"large",children:[(0,s.jsx)(u.Z,{gutter:16,align:"middle",justify:"end",children:(0,s.jsx)(m.Z,{xs:24,md:6,lg:6,children:(0,s.jsx)(g.ZP,{type:"primary",onClick:p,className:"w-full",children:"Nuevo cliente"})})}),(0,s.jsx)(n.Z,{className:"m-0"}),(0,s.jsx)("div",{children:(0,s.jsx)(y,{columns:P,data:F,loading:r})})]}),v&&(0,s.jsx)(C,{isModalOpen:v,handleCancel:N})]})}}},function(e){e.O(0,[8779,4790,8945,2641,803,4389,545,4176,4059,2229,3750,1452,1728,3206,4425,638,5243,3933,9833,2005,4294,2667,8139,1744],function(){return e(e.s=17448)}),_N_E=e.O()}]);