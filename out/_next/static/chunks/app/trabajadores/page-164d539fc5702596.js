(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1379],{71625:function(e,r,a){Promise.resolve().then(a.bind(a,51697))},51697:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return E}});var l=a(9268),s=a(96230),t=a(90362),n=a(98945),o=a(92951),i=a(52641),c=a(5710),d=a(4660),u=a(83206),m=a(70509),x=a(76234),h=a(53235),j=a(80970),g=a(50946),f=a(86006),Z=a(47434),v=a(34138),b=a(68919);let p=e=>{let{handleCancel:r}=e,a=(0,d.I)(),s=(0,i.useSelector)(e=>e.crud.data),[t,{isLoading:n,isError:o,error:p,isSuccess:C,data:N}]=(0,v.zL)(),[y,{isLoading:w,isError:I,error:k,isSuccess:E,data:F}]=(0,v.An)(),[L]=u.Z.useForm(),[q,_]=(0,f.useState)(c.Hi),S=(e,r)=>{if(!r&&e.target){let{name:r,value:a}=e.target;L.setFieldsValue({[r]:a||""}),_(e=>({...e,[r]:a||""}))}else L.setFieldsValue({[r]:e||""}),_(a=>({...a,[r]:e||""}))},D=async e=>{try{s?await y({worker:e,id:s.cod_usuario}):await t(e)}catch(e){b.toast.error(e)}};return(0,f.useEffect)(()=>{if(C&&(b.toast.success(null==N?void 0:N.msg),r()),o){var e;b.toast.error(null===(e=p.data)||void 0===e?void 0:e.msg)}},[C,o]),(0,f.useEffect)(()=>{if(E&&(b.toast.success(null==F?void 0:F.msg),r()),I){var e;b.toast.error(null===(e=k.data)||void 0===e?void 0:e.msg)}},[E,I]),(0,f.useEffect)(()=>{s&&(_(s),L.setFieldsValue(s))},[s]),(0,l.jsx)(u.Z,{form:L,layout:"vertical",requiredMark:!0,onFinish:D,autoComplete:"off",scrollToFirstError:!0,children:(0,l.jsxs)(m.Z,{gutter:[16,16],children:[(0,l.jsx)(x.Z,{xs:24,md:12,lg:16,children:(0,l.jsx)(u.Z.Item,{name:"nombre",label:(0,l.jsx)(Z.L,{text:"Nombre"}),rules:[{required:!0,message:"Ingrese el nombre"}],hasFeedback:!0,children:(0,l.jsx)(h.Z,{placeholder:"Nombre completo",name:"nombre",value:q.nombre,onChange:S,allowClear:!0})})}),(0,l.jsx)(x.Z,{xs:24,md:12,lg:8,children:(0,l.jsx)(u.Z.Item,{name:"dni",label:(0,l.jsx)(Z.L,{text:"N\xb0 DNI"}),rules:[{required:!0,message:"Ingrese el n\xfamero de DNI"},{validator:(e,r)=>r&&8!==r.toString().length?Promise.reject(Error("El campo debe tener 8 d\xedgitos")):Promise.resolve()}],hasFeedback:!0,children:(0,l.jsx)(j.Z,{maxLength:8,placeholder:"N\xfamero de DNI",name:"dni",value:q.dni,onChange:e=>S(e,"dni"),className:"w-full"})})}),(0,l.jsx)(x.Z,{xs:24,md:12,lg:8,children:(0,l.jsx)(u.Z.Item,{name:"oficina",label:(0,l.jsx)(Z.L,{text:"Oficina"}),rules:[{required:!0,message:"Ingrese la oficina"}],hasFeedback:!0,children:(0,l.jsx)(h.Z,{placeholder:"Oficina",name:"oficina",value:q.oficina,onChange:S,allowClear:!0})})}),(0,l.jsx)(x.Z,{xs:24,md:12,lg:8,children:(0,l.jsx)(u.Z.Item,{name:"correo",label:(0,l.jsx)(Z.L,{text:"Correo electr\xf3nico"}),rules:[{required:!0,message:"Ingrese un correo electr\xf3nico"},{type:"email",message:"Ingrese un correo electr\xf3nico v\xe1lido"}],hasFeedback:!0,children:(0,l.jsx)(h.Z,{placeholder:"Correo electr\xf3nico",name:"correo",type:"mail",value:q.correo,onChange:S,allowClear:!0})})}),(0,l.jsx)(x.Z,{xs:24,md:12,lg:8,children:(0,l.jsx)(u.Z.Item,{name:"celular",label:(0,l.jsx)(Z.L,{text:"Celular"}),rules:[{required:!0,message:"Ingrese un n\xfamero de celular"}],hasFeedback:!0,children:(0,l.jsx)(h.Z,{placeholder:"N\xfamero de celular",name:"celular",value:q.celular,onChange:S,allowClear:!0})})}),(0,l.jsx)(x.Z,{span:24,children:(0,l.jsx)(u.Z.Item,{children:(0,l.jsxs)(m.Z,{gutter:[16,16],justify:"end",children:[(0,l.jsx)(x.Z,{xs:24,md:12,lg:4,justify:"end",order:a?2:1,children:(0,l.jsx)(g.ZP,{onClick:r,className:"w-full",children:"Cancelar"},"back")}),(0,l.jsx)(x.Z,{xs:24,md:12,lg:6,order:a?1:2,children:(0,l.jsx)(g.ZP,{type:"primary",loading:s?w:n,htmlType:"submit",className:"w-full",children:"Guardar trabajador"})})]})})})]})})},C=e=>{let{isModalOpen:r,handleCancel:a}=e,c=(0,i.useDispatch)(),d=(0,i.useSelector)(e=>e.crud.data),u=()=>{c((0,s.qD)()),a()};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(t.Z,{title:(0,l.jsx)(n.Z.Title,{level:3,className:"text-center text-text-title",children:d?"Editar Trabajador":"Nuevo Trabajador"}),style:{top:20},width:1e3,open:r,onCancel:u,footer:null,children:[(0,l.jsx)(o.Z,{className:"mt-0"}),(0,l.jsx)(p,{handleCancel:u})]})})};var N=a(91608);let y=e=>{let{loading:r,columns:a,data:s}=e;return(0,l.jsx)(N.Z,{columns:a,dataSource:s,loading:r,rowKey:e=>e.cod_usuario,scroll:{x:"max-content",y:"max-content"}})};var w=a(24294),I=a(88334),k=a(15834);function E(){let e=(0,i.useDispatch)(),{data:r,isLoading:a}=(0,v.tn)(null),[t,{isError:n,error:c,isSuccess:d,data:u}]=(0,v.ss)(),h=r=>{e((0,s.qT)({data:r})),p()},j=async e=>{try{await t(e)}catch(e){b.toast.error(e)}};(0,f.useEffect)(()=>{if(n){var e;b.toast.error(null===(e=c.data)||void 0===e?void 0:e.msg)}d&&b.toast.success(null==u?void 0:u.msg)},[n,c,u]);let{isModalOpen:Z,handleOpen:p,handleCancel:N}=(0,I.d)(),E=(0,w.$J)(h,j),F=(0,f.useMemo)(()=>null==r?void 0:r.data,[r]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(k.Z,{direction:"vertical",className:"w-full",size:"large",children:[(0,l.jsx)(m.Z,{gutter:16,align:"middle",justify:"end",children:(0,l.jsx)(x.Z,{xs:24,md:6,lg:6,children:(0,l.jsx)(g.ZP,{type:"primary",onClick:p,className:"w-full",children:"Nuevo trabajador"})})}),(0,l.jsx)(o.Z,{className:"m-0"}),(0,l.jsx)("div",{children:(0,l.jsx)(y,{columns:E,data:F,loading:a})})]}),Z&&(0,l.jsx)(C,{isModalOpen:Z,handleCancel:N})]})}}},function(e){e.O(0,[8779,4790,8945,2641,803,4389,545,4176,4059,2229,3750,1452,1728,3206,4425,638,5243,3933,9833,2005,4294,2667,8139,1744],function(){return e(e.s=71625)}),_N_E=e.O()}]);